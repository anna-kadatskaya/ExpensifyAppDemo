workflows:
    react-native-ios:
        name: React Native iOS
        max_build_duration: 120
        environment:
            node: 20.10.0
            npm: 10.2.3
            xcode: 16.3
        cache:
          cache_paths:
            - $HOME/Library/Caches/CocoaPods
            - $CM_BUILD_DIR/node_modules
        scripts:
            - name: Install npm dependencies
              script: |
                npm install --legacy-peer-deps
            - name: Install CocoaPods dependencies
              script: |
                cd ios && pod install
            - name: Build unsigned .app for simulator
              script: | 
                --simulator
        artifacts:
          - build/ios/iphonesimulator/Runner.app
